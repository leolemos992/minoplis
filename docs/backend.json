{
  "entities": {
    "Game": {
      "title": "Game",
      "type": "object",
      "description": "Representa uma única partida (sessão de jogo) de Localopoly.",
      "properties": {
        "name": {
          "type": "string",
          "description": "Nome da partida, definido pelo criador."
        },
        "status": {
          "type": "string",
          "description": "Status atual da partida (ex: 'waiting', 'active', 'finished').",
          "enum": ["waiting", "rolling-to-start", "active", "finished"]
        },
        "hostId": {
          "type": "string",
          "description": "O ID do usuário que criou e hospeda o jogo."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp de quando a partida foi criada."
        },
        "currentPlayerId": {
           "type": "string",
           "description": "O ID do jogador cujo turno está ativo."
        },
        "playerOrder": {
            "type": "array",
            "items": {"type": "string"},
            "description": "Array com os IDs dos jogadores na ordem do turno."
        }
      },
      "required": ["name", "status", "hostId", "createdAt"]
    },
    "Player": {
      "title": "Player",
      "type": "object",
      "description": "Representa um jogador dentro de uma partida.",
      "properties": {
        "userId": {
          "type": "string",
          "description": "ID do usuário autenticado (de Firebase Auth)."
        },
        "name": {
          "type": "string",
          "description": "Nome de exibição do jogador na partida."
        },
        "money": {
          "type": "number",
          "description": "Dinheiro atual do jogador."
        },
        "position": {
          "type": "number",
          "description": "Posição atual do jogador no tabuleiro (índice)."
        },
        "color": {
          "type": "string",
          "description": "Cor escolhida pelo jogador."
        },
        "totem": {
          "type": "string",
          "description": "Totem (peça) escolhido pelo jogador."
        },
        "inJail": {
          "type": "boolean",
          "description": "Indica se o jogador está na prisão."
        },
        "properties": {
            "type": "array",
            "items": {"type": "string"},
            "description": "Lista de IDs das propriedades que o jogador possui."
        },
         "mortgagedProperties": {
            "type": "array",
            "items": {"type": "string"},
            "description": "Lista de IDs das propriedades hipotecadas."
        },
        "houses": {
            "type": "object",
            "additionalProperties": {"type": "number"},
            "description": "Mapa de IDs de propriedades para o número de casas construídas."
        },
        "getOutOfJailFreeCards": {
            "type": "number",
            "description": "Número de cartas 'Saia da Prisão' que o jogador possui."
        }
      },
      "required": ["userId", "name", "money", "position", "color", "totem"]
    },
    "RollToStart": {
        "title": "RollToStart",
        "type": "object",
        "description": "Armazena o resultado da rolagem de dados de um jogador para determinar a ordem de início.",
        "properties": {
            "roll": {
                "type": "number",
                "description": "O resultado da rolagem (1-12)."
            },
            "playerName": {
                "type": "string",
                "description": "O nome do jogador que rolou."
            }
        },
        "required": ["roll", "playerName"]
    }
  },
  "auth": {
    "providers": ["anonymous", "google.com"]
  },
  "firestore": {
    "/games/{gameId}": {
      "schema": { "$ref": "#/entities/Game" },
      "description": "Armazena todas as partidas. Qualquer usuário autenticado pode listar e ler as partidas.",
      "subcollections": {
          "/players/{playerId}": {
              "schema": { "$ref": "#/entities/Player"},
              "description": "Armazena os dados de cada jogador na partida. Apenas o jogador correspondente pode modificar seus próprios dados."
          },
          "/rolls-to-start/{playerId}": {
              "schema": { "$ref": "#/entities/RollToStart"},
              "description": "Armazena os resultados da rolagem de dados para determinar a ordem de início do jogo."
          }
      }
    }
  }
}
