{
  "entities": {
    "Game": {
      "title": "Game",
      "type": "object",
      "description": "Representa uma única partida (sessão de jogo) de MINOPLIS.",
      "properties": {
        "name": {
          "type": "string",
          "description": "Nome da partida, definido pelo criador."
        },
        "status": {
          "type": "string",
          "description": "Status atual da partida (ex: 'waiting', 'active', 'finished').",
          "enum": ["waiting", "active", "finished"]
        },
        "hostId": {
          "type": "string",
          "description": "O ID do usuário que criou e hospeda o jogo."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp de quando a partida foi criada."
        },
        "currentPlayerId": {
           "type": "string",
           "description": "O ID do jogador cujo turno está ativo."
        },
        "winnerId": {
           "type": "string",
           "description": "O ID do jogador que venceu a partida."
        },
        "playerOrder": {
            "type": "array",
            "description": "Array ordenado com os UIDs dos jogadores, definindo a ordem dos turnos.",
            "items": { "type": "string" }
        },
        "turn": {
            "type": "number",
            "description": "O índice do jogador atual em playerOrder."
        },
        "auction": {
            "type": "object",
            "description": "Detalhes de um leilão em andamento.",
            "properties": {
                "propertyId": { "type": "string" },
                "status": { "type": "string", "enum": ["active", "finished"] },
                "currentBid": { "type": "number" },
                "currentBidderId": { "type": "string" },
                "participatingPlayerIds": { "type": "array", "items": { "type": "string" } },
                "lastBidderId": { "type": "string" }
            }
        }
      },
      "required": ["name", "status", "hostId", "createdAt", "playerOrder"]
    },
    "Player": {
      "title": "Player",
      "type": "object",
      "description": "Representa um jogador dentro de uma partida.",
      "properties": {
        "userId": {
          "type": "string",
          "description": "ID do usuário autenticado (de Firebase Auth)."
        },
        "name": {
          "type": "string",
          "description": "Nome de exibição do jogador na partida."
        },
        "money": {
          "type": "number",
          "description": "Dinheiro atual do jogador."
        },
        "position": {
          "type": "number",
          "description": "Posição atual do jogador no tabuleiro (índice)."
        },
        "color": {
          "type": "string",
          "description": "Cor escolhida pelo jogador."
        },
        "totem": {
          "type": "string",
          "description": "Totem (peça) escolhido pelo jogador."
        },
        "inJail": {
          "type": "boolean",
          "description": "Indica se o jogador está na prisão."
        },
        "properties": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Array de IDs de propriedades que o jogador possui."
        },
        "mortgagedProperties": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Array de IDs de propriedades hipotecadas."
        },
        "houses": {
            "type": "object",
            "additionalProperties": { "type": "number" },
            "description": "Mapa de propertyId para número de casas (5 para hotel)."
        },
        "getOutOfJailFreeCards": {
            "type": "number",
            "description": "Número de cartas 'Saia Livre da Prisão' que o jogador possui."
        }
      },
      "required": ["userId", "name", "money", "position", "color", "totem"]
    },
     "UserProfile": {
      "title": "User Profile",
      "type": "object",
      "description": "Armazena os dados de perfil e estatísticas de um utilizador.",
      "properties": {
        "uid": { "type": "string" },
        "displayName": { "type": "string" },
        "email": { "type": "string" },
        "xp": { "type": "number", "description": "Pontos de experiência do jogador." },
        "level": { "type": "number", "description": "Nível atual do jogador." },
        "wins": { "type": "number", "description": "Número de vitórias." },
        "gamesPlayed": { "type": "number", "description": "Número de partidas jogadas." }
      },
      "required": ["uid", "displayName", "email", "xp", "level", "wins", "gamesPlayed"]
    }
  },
  "auth": {
    "providers": ["password"]
  },
  "firestore": {
    "/games/{gameId}": {
      "schema": { "$ref": "#/entities/Game" },
      "description": "Armazena todas as partidas. Qualquer usuário autenticado pode criar partidas e ler a lista de partidas em espera.",
      "subcollections": {
          "/players/{playerId}": {
              "schema": { "$ref": "#/entities/Player"},
              "description": "Armazena os dados de cada jogador na partida. Um jogador só pode se adicionar ou atualizar a si mesmo."
          }
      }
    },
    "/users/{userId}": {
        "schema": { "$ref": "#/entities/UserProfile" },
        "description": "Armazena os perfis e estatísticas de todos os utilizadores."
    }
  }
}
